<div class="recipe-container">
  <h2>{{ selected ? 'Editar Receita' : 'Nova Receita' }}</h2>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="recipe-form">
    <div class="form-group">
      <label for="title">Título</label>
      <input id="title" formControlName="title" type="text" placeholder="Título da receita" />
      <div *ngIf="form.get('title')?.invalid && form.get('title')?.touched" class="error">
        Título é obrigatório.
      </div>
    </div>

    <div class="form-group">
      <label for="description">Descrição</label>
      <textarea id="description" formControlName="description" placeholder="Descrição da receita"></textarea>
      <div *ngIf="form.get('description')?.invalid && form.get('description')?.touched" class="error">
        Descrição é obrigatória.
      </div>
    </div>

    <div class="form-group">
      <label for="preparationTime">Tempo de Preparação</label>
      <input id="preparationTime" formControlName="preparationTime" type="text" min="1" />
      <div *ngIf="form.get('preparationTime')?.invalid && form.get('preparationTime')?.touched" class="error">
        Tempo de preparação é obrigatório e deve ser maior que zero.
      </div>
    </div>

    <div class="form-group">
      <label for="categoryId">Categoria</label>
      <select id="categoryId" formControlName="categoryId">
        <option value="" disabled>Selecione uma categoria</option>
        <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
      </select>
      <div *ngIf="form.get('categoryId')?.invalid && form.get('categoryId')?.touched" class="error">
        Categoria é obrigatória.
      </div>
    </div>

    <div class="form-group">
      <label for="difficultyId">Dificuldade</label>
      <select id="difficultyId" formControlName="difficultyId">
        <option value="" disabled>Selecione a dificuldade</option>
        <option *ngFor="let difficulty of difficulties" [value]="difficulty.id">{{ difficulty.name }}</option>
      </select>
      <div *ngIf="form.get('difficultyId')?.invalid && form.get('difficultyId')?.touched" class="error">
        Dificuldade é obrigatória.
      </div>
    </div>

    <div class="form-group">
      <label for="userId">Usuário</label>
      <input id="userId" [value]="currentUser?.name" type="text" readonly />
    </div>

    <div class="form-group checkbox-group">
      <label>
        <input type="checkbox" formControlName="isActive" />
        Ativo
      </label>
    </div>

    <button type="submit" [disabled]="form.invalid" class="btn-submit">
      {{ selected ? 'Atualizar' : 'Criar' }}
    </button>
    <button type="button" (click)="clearForm()" class="btn-clear">Limpar</button>
  </form>

  <div class="recipe-list">
    <h3>Receitas Existentes</h3>
    <ul>
      <li *ngFor="let recipe of recipes" (click)="select(recipe)" [class.selected]="selected?.id === recipe.id">
        {{ recipe.title }}
      </li>
    </ul>
  </div>
</div>
